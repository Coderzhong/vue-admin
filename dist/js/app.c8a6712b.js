(function(e){function n(n){for(var o,r,i=n[0],s=n[1],c=n[2],l=0,d=[];l<i.length;l++)r=i[l],a[r]&&d.push(a[r][0]),a[r]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);m&&m(n);while(d.length)d.shift()();return u.push.apply(u,c||[]),t()}function t(){for(var e,n=0;n<u.length;n++){for(var t=u[n],o=!0,r=1;r<t.length;r++){var i=t[r];0!==a[i]&&(o=!1)}o&&(u.splice(n--,1),e=s(s.s=t[0]))}return e}var o={},r={app:0},a={app:0},u=[];function i(e){return s.p+"js/"+({404:"404",dashboard:"dashboard",document:"document",form:"form",layout:"layout",login:"login",muitiMenu:"muitiMenu",permission:"permission"}[e]||e)+"."+{404:"5a255062",dashboard:"6c05b601",document:"376799a2",form:"4e189a94",layout:"fde015e1",login:"55348404",muitiMenu:"5a473cc9",permission:"4fb766bc"}[e]+".js"}function s(n){if(o[n])return o[n].exports;var t=o[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.e=function(e){var n=[],t={layout:1,login:1};r[e]?n.push(r[e]):0!==r[e]&&t[e]&&n.push(r[e]=new Promise(function(n,t){for(var o="css/"+({404:"404",dashboard:"dashboard",document:"document",form:"form",layout:"layout",login:"login",muitiMenu:"muitiMenu",permission:"permission"}[e]||e)+"."+{404:"31d6cfe0",dashboard:"31d6cfe0",document:"31d6cfe0",form:"31d6cfe0",layout:"6fa6ad4b",login:"b9cb7b47",muitiMenu:"31d6cfe0",permission:"31d6cfe0"}[e]+".css",a=s.p+o,u=document.getElementsByTagName("link"),i=0;i<u.length;i++){var c=u[i],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===o||l===a))return n()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){c=d[i],l=c.getAttribute("data-href");if(l===o||l===a)return n()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=n,m.onerror=function(n){var o=n&&n.target&&n.target.src||a,u=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");u.code="CSS_CHUNK_LOAD_FAILED",u.request=o,delete r[e],m.parentNode.removeChild(m),t(u)},m.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(m)}).then(function(){r[e]=0}));var o=a[e];if(0!==o)if(o)n.push(o[2]);else{var u=new Promise(function(n,t){o=a[e]=[n,t]});n.push(o[2]=u);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=i(e),c=function(n){l.onerror=l.onload=null,clearTimeout(d);var t=a[e];if(0!==t){if(t){var o=n&&("load"===n.type?"missing":n.type),r=n&&n.target&&n.target.src,u=new Error("Loading chunk "+e+" failed.\n("+o+": "+r+")");u.type=o,u.request=r,t[1](u)}a[e]=void 0}};var d=setTimeout(function(){c({type:"timeout",target:l})},12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(n)},s.m=e,s.c=o,s.d=function(e,n,t){s.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,n){if(1&n&&(e=s(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(s.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)s.d(t,o,function(n){return e[n]}.bind(null,o));return t},s.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(n,"a",n),n},s.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},s.p="",s.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=n,c=c.slice();for(var d=0;d<c.length;d++)n(c[d]);var m=l;u.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"56d7":function(e,n,t){"use strict";t.r(n);t("5c07"),t("53da"),t("2556"),t("d0f8");var o=t("6e6d"),r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},a=[],u=t("17cc"),i={},s=Object(u["a"])(i,r,a,!1,null,null,null),c=s.exports,l=(t("5b17"),t("20e9"),t("d093"),t("bea0"));o["default"].use(l["Pagination"]),o["default"].use(l["Scrollbar"]),o["default"].use(l["Dialog"]),o["default"].use(l["Dropdown"]),o["default"].use(l["DropdownMenu"]),o["default"].use(l["DropdownItem"]),o["default"].use(l["Menu"]),o["default"].use(l["Submenu"]),o["default"].use(l["MenuItem"]),o["default"].use(l["MenuItemGroup"]),o["default"].use(l["Input"]),o["default"].use(l["InputNumber"]),o["default"].use(l["Radio"]),o["default"].use(l["Checkbox"]),o["default"].use(l["CheckboxButton"]),o["default"].use(l["Select"]),o["default"].use(l["Option"]),o["default"].use(l["Button"]),o["default"].use(l["Table"]),o["default"].use(l["TableColumn"]),o["default"].use(l["DatePicker"]),o["default"].use(l["Breadcrumb"]),o["default"].use(l["BreadcrumbItem"]),o["default"].use(l["Form"]),o["default"].use(l["FormItem"]),o["default"].use(l["Icon"]),o["default"].use(l["Row"]),o["default"].use(l["Col"]),o["default"].use(l["Loading"].directive),o["default"].prototype.$loading=l["Loading"].service,o["default"].prototype.$msgbox=l["MessageBox"],o["default"].prototype.$alert=l["MessageBox"].alert,o["default"].prototype.$confirm=l["MessageBox"].confirm,o["default"].prototype.$prompt=l["MessageBox"].prompt,o["default"].prototype.$notify=l["Notification"],o["default"].prototype.$message=l["Message"];t("c018"),t("f842"),t("508f");var d=t("1e6f"),m=function(){return t.e("login").then(t.bind(null,"a55b"))},f=function(){return t.e("layout").then(t.bind(null,"eaf6"))},p=function(){return t.e("dashboard").then(t.bind(null,"5c3a"))},h=function(){return t.e("document").then(t.bind(null,"080f"))},b=function(){return t.e("document").then(t.bind(null,"ba4e"))},g=function(){return t.e("muitiMenu").then(t.bind(null,"bd13"))},v=function(){return t.e("muitiMenu").then(t.bind(null,"fda3"))},y=function(){return t.e("muitiMenu").then(t.bind(null,"0e3f"))},E=function(){return t.e("muitiMenu").then(t.bind(null,"fffc"))},M=function(){return t.e("form").then(t.bind(null,"23bd"))},x=function(){return t.e("form").then(t.bind(null,"85b5"))},S=function(){return t.e("permission").then(t.bind(null,"7e47"))},w=function(){return t.e("404").then(t.bind(null,"2754"))};o["default"].use(d["a"]);var T=[{path:"/login",name:"Login",component:m,hidden:!0},{path:"/",name:"Layout",component:f,redirect:"/dashboard",children:[{path:"/dashboard",name:"Dashboard",component:p,meta:{title:"首页",icon:"home"}}]},{path:"/document",name:"Document",component:f,meta:{title:"文档",icon:"file-text"},children:[{path:"index",name:"DocumentIndex",component:h,meta:{title:"索引"}},{path:"conventions",name:"Conventions",component:b,meta:{title:"规范"}}]},{path:"/menu",name:"Menu",component:f,meta:{title:"多级菜单",icon:"bars"},children:[{path:"menu1",name:"Menu1",component:g,meta:{title:"菜单1"},children:[{path:"menu1-1",name:"Menu1-1",component:v,meta:{title:"菜单1-1"}},{path:"menu1-2",name:"Menu1-2",component:y,meta:{title:"菜单1-2"}}]},{path:"menu2",name:"Menu2",component:E,meta:{title:"菜单2"}}]},{path:"/404",name:"Err404",component:w,hidden:!0}],k=[{path:"/permission",name:"Permission",component:f,children:[{path:"index",name:"PermissionIndex",component:S,meta:{title:"权限",icon:"key",roles:["admin"]}}]},{path:"/form",name:"Form",component:f,meta:{title:"表单",icon:"file"},children:[{path:"form1",name:"Form1",component:M,meta:{title:"表单"}},{path:"form2",name:"Form2",component:x,meta:{title:"权限表单2",roles:["admin"]}}]},{path:"*",name:"All",component:w,hidden:!0}],O=function(){return new d["a"]({scrollBehavior:function(){return{y:0}},routes:T})},_=O();function I(){var e=O();_.matcher=e.matcher}var P=_,D=t("52c1"),L={sidebar:{isCollapse:!1}},j={TOGGLE_SIDEBAR:function(e){e.sidebar.isCollapse=!e.sidebar.isCollapse}},R={},B={namespaced:!0,state:L,mutations:j,actions:R},C=(t("3a23"),t("48fb"),t("7f43")),A=t.n(C),N=t("8c92"),F=t.n(N),U="Token";function $(){return F.a.get(U)}function K(e){return F.a.set(U,e,{expires:1})}function q(){return F.a.remove(U)}var G=A.a.create({timeout:5e3});G.interceptors.request.use(function(e){var n=$();return n&&(e.headers["Authorization"]=n),e},function(e){return console.log(e),Promise.reject(e)}),G.interceptors.response.use(function(e){var n=e.data,t=n.code,o=n.message,r=n.data;return t&&0!==t&&l["MessageBox"].alert(o,{type:"warning"}),{code:t,message:o,data:r}},function(e){return l["MessageBox"].alert(e.toString(),{type:"warning"}),Promise.reject(e)});var J=G,z=function(e){return J.post("api/login",e)},H=function(e){return J.get("api/getUserInfo",{params:e})},V={token:$(),name:"",roles:[],rules:{}},Q={SET_TOKEN:function(e,n){e.token=n},SET_NAME:function(e,n){e.name=n},SET_ROLES:function(e,n){e.roles=n},SET_RULES:function(e,n){e.rules=n}},W={login:function(e,n){var t=e.commit;return new Promise(function(e,o){z(n).then(function(n){var o=n.code,r=n.data.token;0===o&&(t("SET_TOKEN",r),K(r),e())}).catch(function(e){o(e)})})},getUserInfo:function(e){var n=e.commit,t=e.state;return new Promise(function(e,o){H({id:t.token}).then(function(t){var r=t.code,a=t.message,u=t.data;0!==r&&o(new Error(a));var i=u.token,s=u.userInfo,c=s.name,l=s.roles,d=s.rules;(!l||l.length<=0)&&o(new Error("roles字段必须是个非空的数组")),d||o(new Error("rules不能为空")),K(i),n("SET_NAME",c),n("SET_ROLES",l),n("SET_RULES",d),e(u)}).catch(function(e){o(e)})})},logout:function(e){var n=e.commit;e.state;n("SET_TOKEN",""),n("SET_NAME",""),n("SET_ROLES",[]),n("SET_RULES",{}),q(),I()}},X={namespaced:!0,state:V,mutations:Q,actions:W},Y=(t("612f"),t("bd70"),t("c1f9"));function Z(e,n){return e.filter(function(e){return!!n[e.name]&&(e.children&&(e.children=Z(e.children,n)),!0)})}var ee={routes:[],addRoutes:[]},ne={SET_ROUTES:function(e,n){e.addRoutes=n,e.routes=T.concat(n)}},te={generateRoutes:function(e,n){var t=e.commit;return new Promise(function(e){var o;o=Object.entries(n).every(function(e){return e[1]})?Object(Y["cloneDeep"])(k)||[]:Z(Object(Y["cloneDeep"])(k),n),t("SET_ROUTES",o),e(o)})}},oe={namespaced:!0,state:ee,mutations:ne,actions:te};o["default"].use(D["a"]);var re=new D["a"].Store({modules:{app:B,user:X,permission:oe}}),ae=t("3556"),ue=(t("4453"),t("a7ca"));P.beforeEach(function(){var e=Object(ue["a"])(regeneratorRuntime.mark(function e(n,t,o){var r,a,u,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=$(),!r){e.next=22;break}if("/login"!==n.path){e.next=6;break}o({path:"/"}),e.next=20;break;case 6:if(a=re.state.user.rules.views,!a){e.next=11;break}o(),e.next=20;break;case 11:return e.next=13,re.dispatch("user/getUserInfo");case 13:return u=e.sent,i=u.userInfo.rules,e.next=17,re.dispatch("permission/generateRoutes",i.views);case 17:s=e.sent,P.addRoutes(s),o(Object(ae["a"])({},n,{replace:!0}));case 20:e.next=23;break;case 22:"/login"===n.path?o():o({path:"/login"});case 23:case"end":return e.stop()}},e)}));return function(n,t,o){return e.apply(this,arguments)}}());t("f10e");var ie=t("fddc"),se=t.n(ie),ce={admin:"admin-token",visitor:"visitor-token"},le={"admin-token":{name:"Admin",roles:["admin"],rules:{views:{Login:!0,Layout:!0,Dashboard:!0,Document:!0,DocumentIndex:!0,Conventions:!0,Menu:!0,Menu1:!0,Menu11:!0,Menu12:!0,Menu2:!0,Err404:!0,Permission:!0,PermissionIndex:!0,Form:!0,Form1:!0,Form2:!0,All:!0},components:{}}},"visitor-token":{name:"Visitor",roles:["visitor"],rules:{views:{Login:!0,Layout:!0,Dashboard:!0,Document:!0,DocumentIndex:!0,Conventions:!0,Menu:!0,Menu1:!0,Menu11:!0,Menu12:!0,Menu2:!0,Err404:!0,Permission:!1,PermissionIndex:!1,Form:!0,Form1:!0,Form2:!1,All:!0},components:{}}}};se.a.mock(/api\/login/,"post",function(e){var n=JSON.parse(e.body),t=n.username,o=ce[t];return o?{code:0,message:"OK",data:{token:o}}:{code:110,message:"用户名不正确",data:{}}}),se.a.mock(/api\/getUserInfo/,"get",function(e){var n=e.url.match(/id=(\S*)/)[1],t=le[n];return t?{code:0,message:"OK",data:{token:n,userInfo:t}}:{code:110,message:"登录失败，无法获取用户信息",data:{}}});o["default"].config.productionTip=!1,new o["default"]({router:P,store:re,render:function(e){return e(c)}}).$mount("#app")},c018:function(e,n,t){},d093:function(e,n,t){e.exports={menuBg:"#0f2153",menuText:"#bfcbd9"}},f842:function(e,n,t){e.exports={menuBg:"#0f2153",menuText:"#bfcbd9"}}});